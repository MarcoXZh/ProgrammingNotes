<!DOCTYPE html>
<html>
<head>
  <title> JsTreeNode & JsTree </title>
  <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
  <script id= "testcode">
    function consoleOutput() {
      var str = "";
      var root = new JsTreeNode("root");
      str += "var root = new JsTreeNode(\"root\");\n";
      var tree = new JsTree(root, "Tree");
      str += "var tree = new JsTree(root, \"Tree\");\n";
      str += tree.toString() + "\n";
      var c12 = new JsTreeNode("c12");
      str += "var c12 = new JsTreeNode(\"c12\");\n";
      str += "root.insertChild(0, c12);\t" + root.insertChild(0, c12) + "\n";
      var c11 = new JsTreeNode("c11");
      str += "var c11 = new JsTreeNode(\"c11\");\n";
      str += "root.prependChild(c11);\t\t" + root.prependChild(c11) + "\n";
      var c14 = new JsTreeNode("c14");
      str += "var c14 = new JsTreeNode(\"c14\");\n";
      str += "root.appendChild(c14);\t\t" + root.appendChild(c14) + "\n";
      str += tree.toString() + "\n";
      var c13 = new JsTreeNode("c13");
      str += "var c13 = new JsTreeNode(\"c13\");\n";
      str += "root.insertChild(2, c13);\t" + root.insertChild(2, c13) + "\n";
      str += tree.toString() + "\n";
      var c21 = new JsTreeNode("c21");
      str += "var c21 = new JsTreeNode(\"c21\");\n";
      var c22 = new JsTreeNode("c22");
      str += "var c22 = new JsTreeNode(\"c22\");\n";
      var c23 = new JsTreeNode("c23");
      str += "var c23 = new JsTreeNode(\"c23\");\n";
      var c24 = new JsTreeNode("c24");
      str += "var c24 = new JsTreeNode(\"c24\");\n";
      var c25 = new JsTreeNode("c25");
      str += "var c25 = new JsTreeNode(\"c25\");\n";
      var c26 = new JsTreeNode("c26");
      str += "var c26 = new JsTreeNode(\"c26\");\n";
      str += "c11.insertChild(0, c21);\t" + c11.insertChild(0, c21) + "\n";
      str += tree.toString() + "\n";
      str += "c11.appendChild(c22);\t\t" + c11.appendChild(c22) + "\n";
      str += tree.toString() + "\n";
      str += "c11.removeChild(new removeChildNode(\"null\"));\t" +
             c11.removeChild(new JsTreeNode("null")) + "\n";
      str += tree.toString() + "\n";
      str += "c11.removeChild(c21);\t\t" + c11.removeChild(c21) + "\n";
      str += tree.toString() + "\n";
      str += "c12.appendChild(c23);\t\t" + c12.appendChild(c23) + "\n";
      str += tree.toString() + "\n";
      str += "c12.appendChild(c23);\t\t" + c12.appendChild(c23) + "\n";
      str += tree.toString() + "\n";
      str += "c12.appendChild(c25);\t\t" + c12.appendChild(c25) + "\n";
      str += tree.toString() + "\n";
      str += "c12.replaceChild(c24, new JsTreeNode(\"null\"));\t" +
             c12.replaceChild(c24, new JsTreeNode("null")) + "\n";
      str += tree.toString() + "\n";
      str += "c12.replaceChild(c24, c25);\t" + c12.replaceChild(c24, c25) + "\n";
      str += tree.toString() + "\n";
      str += "c13.appendChild(c25);\t\t" + c13.appendChild(c25) + "\n";
      str += tree.toString() + "\n";
      str += "c13.appendChild(c26);\t\t" + c13.appendChild(c26) + "\n";
      str += tree.toString() + "\n";
      str += "root.removeChild(c12);\t\t" +  root.removeChild(c12) + "\n";
      str += tree.toString() + "\n";
      str += "root.removeChild(c13);\t\t" +  root.removeChild(c13) + "\n";
      str += tree.toString();
      document.getElementById("output").innerHTML = str;
    } // function consoleOutput()
  </script>
  <script>
    function showCodes() {
      var node = document.getElementById("source-jstree");
      var innerHTML = document.getElementById("jstree").innerHTML;
      node.innerHTML = innerHTML.trim().replace(/\n    /g, "\n");

      node = document.getElementById("source-jstreenode");
      innerHTML = document.getElementById("jstreenode").innerHTML;
      node.innerHTML = innerHTML.trim().replace(/\n    /g, "\n");

      node = document.getElementById("test");
      innerHTML = document.getElementById("testcode").innerHTML;
      node.innerHTML = innerHTML.trim().replace(/\n    /g, "\n");
    } // function showCodes()
  </script>
</head>
<body onload="consoleOutput(); showCodes();">
  <div style="margin:8px; float:left; width:55%;">
    <p style="font-weight:bold;">Source Code - TreeNode</p>
    <pre id="source-jstreenode" style="border:1px solid; padding:8px; overflow:scroll; height:500px;"></pre>
  </div>
  <div style="margin:8px; float:left; width:55%; top:600px; position:absolute;">
    <p style="font-weight:bold;">Source Code - Tree</p>
    <pre id="source-jstree" style="border:1px solid; padding:8px; overflow:scroll; height:500px;"></pre>
  </div>
  <div style="margin:8px; float:right; width:40%;">
    <p style="font-weight:bold;">Console Output</p>
    <pre id="output" style="border:1px solid; padding:8px; overflow:scroll; height:500px;"></pre>
  </div>
  <div style="margin:8px; float:right; width:40%; top:600px;">
    <p style="font-weight:bold;">Test Code</p>
    <pre id="test" style="border:1px solid; padding:8px; overflow:scroll; height:500px;"></pre>
  </div>
  <script id="jstreenode">
    /**
     * JavaScript Implementation of "JsTreeNode" class
     * @author  MarcoXZh
     * @version  1.1
     */
    function JsTreeNode(name) {
      var nodeName = "";
      var parentNode = null;
      var children = [];

      this.getName = function() {
        return nodeName;
      }; // this.getName = function() {...};

      this.setName = function(name) {
        nodeName = name;
      }; // this.setName = function(name) {...};

      this.getParent = function() {
        return parentNode;
      }; // this.getParent = function() {...};

      this.setParent = function(parent) {
        parentNode = parent;
      }; // this.setParent = function(parent) {...};

      this.getChildrenSize = function() {
        return children.length;
      }; // this.getChildrenSize = function() {...};

      this.getChild = function(index) {
        return children[index];
      }; // this.getChild = function(index) {...};

      this.setChild = function(index, node) {
        children[index] = node;
        return true;
      }; // this.setChild = function(index, node) {};

      this.insertChild = function(index, node) {
        children = children.slice(0, index).concat(node, children.slice(index, children.length));
        return children.length;
      }; // this.insertChild = function(index, node) {...};

      this.prependChild = function(node) {
        return children.unshift(node);
      }; // this.prependChild = function(node) {...};

      this.appendChild = function(node) {
        return children.push(node);
      }; // this.appendChild = function(node) {...};

      this.removeChild = function(para) {
        if (typeof para === "number")
          return children.splice(para, 1);
        else if (para instanceof JsTreeNode) {
          for (i in children)
            if (children[i] === para)
              return children.splice(i, 1);
        } // else - if
        return null;
      }; // this.removeChild = function(para) {...};

      this.replaceChild = function(oldChild, newChild) {
        if (!oldChild || !(oldChild instanceof JsTreeNode) || !newChild || (newChild instanceof JsTreeNode))
          return false;
        for (i in children)
          if (children[i] === oldChild) {
            children[i] = newChild;
            return true;
          } // for - if
        return false;
      }; // this.replaceChild = function(oldChild, newChild) {...};

      this.containsChild = function(node) {
        if (!node)
          return false;
        return children[index] === null || children[index] === undefined;
      }; // this.containsChild = function(node) {...};

      this.toString = function() {
        var str = nodeName + ": parent-" + (parentNode == null ? "null" : parentNode.getName()) +
                  "; children(" + children.length + ")-[";
        for (i in children)
          str += children[i].getName() + ", ";
        if (children.length > 0)
          str = str.substr(0, str.length - 2);
        return str + "]";
      }; // this.toString = function() {...};

      this.setName(name);
    } // function JsTreeNode(name)
  </script>

  <script id="jstree">
    /**
     * JavaScript Implementation of "JsTree" class
     * @author  MarcoXZh
     * @version  1.1
     */
    function JsTree(treeRoot, name) {
      var treeName = "";
      var rootNode = null;

      this.getName = function() {
        return treeName;
      }; // this.getName = function() {...};

      this.setName = function(name) {
        treeName = name;
      }; // this.setName = function(name) {...};

      this.getRoot = function() {
        return rootNode;
      }; // this.getRoot = function() {...};

      this.setRoot = function(root) {
        rootNode = root;
      }; // this.setRoot = function(root) {...};

      this.isEmpty = function() {
        return rootNode === null || rootNode === undefined;
      }; // this.isEmpty = function() {...};

      var hasNode = function(root, node) {
        if (root === node)
          return true;
        var index = root.getChildrenSize();
        while (index-- > 0) {
          if (hasNode(root.getChildNode(index), node))
            return true;
        } // while (index-- >= 0)
        return false;
      }; // var hasNode = function(root, node) {...};

      this.containsNode = function(node) {
        if (!node)
          return false;
        return hasNode(rootNode);
      }; // this.containsNode = function(node) {...};

      var getSubTreeDepth = function(root) {
        var depth = 0, index = root.getChildrenSize();
        while (index-- > 0) {
          var d = getSubTreeDepth(root.getChildNode(index));
          if (d > depth)
            depth = d;
        } // while (index-- >= 0)
        return depth + 1;
      }; // var getSubTreeDepth = function(root) {...};

      this.getTreeDepth = function() {
        if (!rootNode)
          return 0;
        return getSubTreeDepth(rootNode);
      }; // this.getTreeDepth = function() {...};

      this.getNodeDepth = function(node) {
        return this.containsNode(node) ? getSubTreeDepth(node) : -1;
      }; // this.getNodeDepth = function(node) {...};

      this.getNodeLevel = function(node) {
        if (!this.containsNode(node))
          return -1;
        var parent = node.getParentNode();
        var level = 1;
        while (!parent) {
          level ++;
          parent = parent.getParentNode();
        } // while (!parent)
        return level;
      }; // this.getNodeLevel = function(node) {...};

      var getNodeString = function(root, level) {
        var text = "  ";
        var index = 0;
        while (index++ < level)
          text += "| ";
        if (text.length != 2)
          text = text.substr(0, text.length - 1) + "-";
        text += root.toString() + "\n";
        index = -1;
        var size = root.getChildrenSize();
        while (index++ < size - 1)
          text += getNodeString(root.getChild(index), level + 1);
        return text;
      }; // var getNodeString = function(root) {...};

      this.toString = function() {
        var text = "================ JsTree: " + treeName + " ================\n";
        text += getNodeString(rootNode, 0);
        text += "================ JsTree: " + treeName + " ================\n";
        return text;
      }; // this.toString = function() {...};

      this.setRoot(treeRoot);
      this.setName(name);
    } // function JsTree(treeRoot, name)
  </script>
</body>
</html>
